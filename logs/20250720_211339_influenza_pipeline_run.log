2025-07-20 21:13:39,569 - INFO - Logging initialized. Log file at: logs/20250720_211339_influenza_pipeline_run.log
2025-07-20 21:13:39,569 - INFO - ================== STARTING PIPELINE FOR: INFLUENZA ==================
2025-07-20 21:13:39,569 - INFO - --- Executing: /home/topcuoglu/miniconda3/envs/orh/bin/python3 src/03_haplocov/run_haplocov.py --virus influenza --config config/config.yaml ---
2025-07-20 21:22:56,039 - INFO - Stdout from step:
INFO: Logging initialized. Log file at: logs/20250720_211339_influenza_03_run_haplocov.log
INFO: --- Starting Step 3: Run HaploCoV for 'influenza' ---
INFO: Created temporary working directory: results/haplocov_output/influenza/distNonesizeNone/temp_work
INFO: Creating symbolic links for input files in temporary directory...
INFO: Executing HaploCoV with designation_mode: 'both'
INFO: Executing: perl ../../../../../libs/haplocov/addToTableNCBI.pl --metadata metadata.tsv --ref reference.fasta --seq sequences.fasta --outfile out.HaploCoV --nproc 16
INFO: Executing: perl ../../../../../libs/haplocov/computeDefining.pl out.HaploCoV
INFO: Executing: perl ../../../../../libs/haplocov/assign.pl --dfile out.HaploCoV.definingVariants.txt --infile out.HaploCoV --outfile out.HaploCoV.assigned
INFO: Executing: perl ../../../../../libs/haplocov/augmentClusters.pl --metafile out.HaploCoV.assigned --deffile out.HaploCoV.definingVariants.txt --posFile out.HaploCoV.frequentVariants.txt --outfile out.HaploCoV.definingVariantsNew.txt --dist None --size None
INFO: Executing: perl ../../../../../libs/haplocov/assign.pl --dfile out.HaploCoV.definingVariantsNew.txt --infile out.HaploCoV --outfile out.HaploCoV.assignedNew
INFO: Executing: cut -f 10 out.HaploCoV.assignedNew | sort | uniq -c > influenza-report.txt
INFO: Moving final output file 'out.HaploCoV.assignedNew' to 'results/haplocov_output/influenza/distNonesizeNone/haplocov_assigned.tsv'
INFO: HaploCoV step completed.
INFO: HaploCoV step finished successfully.

2025-07-20 21:22:56,040 - INFO - --- Step Succeeded: /home/topcuoglu/miniconda3/envs/orh/bin/python3 src/03_haplocov/run_haplocov.py --virus influenza --config config/config.yaml ---
2025-07-20 21:22:56,040 - INFO - --- Executing: /home/topcuoglu/miniconda3/envs/orh/bin/python3 src/04_postprocessing/format_haplocov_variations.py --virus influenza --config config/config.yaml ---
2025-07-20 21:22:56,706 - ERROR - --- Step FAILED: /home/topcuoglu/miniconda3/envs/orh/bin/python3 src/04_postprocessing/format_haplocov_variations.py --virus influenza --config config/config.yaml ---
2025-07-20 21:22:56,706 - ERROR - Return Code: 1
2025-07-20 21:22:56,706 - ERROR - Stderr:
Traceback (most recent call last):
  File "/home/topcuoglu/openrecombinhunt/src/04_postprocessing/format_haplocov_variations.py", line 252, in <module>
    main()
  File "/home/topcuoglu/openrecombinhunt/src/04_postprocessing/format_haplocov_variations.py", line 212, in main
    haplocov_params = virus_config.get(PARAMETERS).get(HAPLOCOV)
AttributeError: 'NoneType' object has no attribute 'get'

2025-07-20 21:22:56,707 - ERROR - Stdout:
INFO: Logging initialized. Log file at: logs/20250720_212256_influenza_04_postprocess_haplocov.log

2025-07-20 21:22:56,707 - CRITICAL - Pipeline for 'influenza' failed at step: /home/topcuoglu/miniconda3/envs/orh/bin/python3 src/04_postprocessing/format_haplocov_variations.py --virus influenza --config config/config.yaml
2025-07-20 21:22:56,707 - CRITICAL - Aborting pipeline for this virus.
2025-07-20 21:22:56,707 - INFO - ================== PIPELINE FOR INFLUENZA FINISHED ==================


