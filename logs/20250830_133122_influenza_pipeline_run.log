2025-08-30 13:31:22,762 - INFO - Logging initialized. Log file at: logs/20250830_133122_influenza_pipeline_run.log
2025-08-30 13:31:22,762 - INFO - ================== STARTING PIPELINE FOR: INFLUENZA ==================
2025-08-30 13:31:22,762 - INFO - --- Executing: /home/topcuoglu/miniconda3/envs/orh/bin/python src/01_data_acquisition/fetch_data.py --virus influenza --config config/config.yaml ---
2025-08-30 13:32:12,961 - INFO - Stdout from step:
INFO: Logging initialized. Log file at: logs/20250830_133122_influenza_01_fetch_data.log
INFO: Ensuring raw data directory exists: data/raw/influenza
INFO: Starting FTP data acquisition...
INFO: Step 1: Downloading metadata from https://ftp.ncbi.nlm.nih.gov/genomes/Viruses/AllNuclMetadata/AllNuclMetadata.csv.gz
INFO: Downloading from https://ftp.ncbi.nlm.nih.gov/genomes/Viruses/AllNuclMetadata/AllNuclMetadata.csv.gz
INFO: Decompressing data/raw/influenza/temp_raw_metadata.csv.gz...
INFO: Successfully created data/raw/influenza/raw_metadata.csv
INFO: Data fetching process for 'influenza' complete.

2025-08-30 13:32:12,961 - INFO - --- Step Succeeded: /home/topcuoglu/miniconda3/envs/orh/bin/python src/01_data_acquisition/fetch_data.py --virus influenza --config config/config.yaml ---
2025-08-30 13:32:12,961 - INFO - --- Executing: /home/topcuoglu/miniconda3/envs/orh/bin/python src/02_preprocessing/ftp/prep_metadata_ftp.py --virus influenza --config config/config.yaml ---
2025-08-30 13:35:10,792 - INFO - Stdout from step:
INFO: Logging initialized. Log file at: logs/20250830_133213_influenza_02.1_prep_metadata_ftp.log
INFO: Loading raw metadata from data/raw/influenza/raw_metadata.csv...
INFO: Starting metadata processing...
INFO: Step 1: Applying filtering rules...
INFO:   Filtering complete. Kept 13620 rows out of 14342667.
INFO: Step 2: Renaming columns to standard format...
INFO: Step 3: Creating 'Pango lineage' column and setting to 'A.1'...
INFO: Step 4: Formatting Location and Date columns...
INFO:   - Formatting 'Location' column...
INFO:   - Formatting date columns...
INFO: Processing complete. Final DataFrame has 13620 rows.
INFO: Saving processed metadata (13620 rows) to data/processed/influenza/metadata.tsv...
INFO: Saving 13620 unique accession IDs to data/processed/influenza/influenza-accession-ids.txt...
INFO: Script finished successfully.

2025-08-30 13:35:10,792 - INFO - --- Step Succeeded: /home/topcuoglu/miniconda3/envs/orh/bin/python src/02_preprocessing/ftp/prep_metadata_ftp.py --virus influenza --config config/config.yaml ---
2025-08-30 13:35:10,792 - INFO - --- Executing: /home/topcuoglu/miniconda3/envs/orh/bin/python src/02_preprocessing/ftp/fetch_ftp_sequences_by_id.py --virus influenza --config config/config.yaml ---
2025-08-30 13:35:21,435 - INFO - Stdout from step:
INFO: Logging initialized. Log file at: logs/20250830_133511_influenza_02.2_fetch_sequences_by_id.log
INFO: --- Starting Step 2.2: Fetch Sequences by ID for 'influenza' ---
INFO: Created temporary working directory: data/processed/influenza/temp_fetch_sequences
INFO: Executing: datasets download virus genome accession --inputfile influenza-accession-ids.txt --filename influenza-sequences.zip
INFO: Unzipping data/processed/influenza/temp_fetch_sequences/influenza-sequences.zip...
INFO: Found: data/processed/influenza/temp_fetch_sequences/ncbi_dataset/data/genomic.fna. Moving and renaming to data/processed/influenza/sequences.fasta
INFO: Cleaning up temporary working directory...
INFO: Cleanup complete.
INFO: Sequence fetching step finished successfully.

2025-08-30 13:35:21,436 - INFO - --- Step Succeeded: /home/topcuoglu/miniconda3/envs/orh/bin/python src/02_preprocessing/ftp/fetch_ftp_sequences_by_id.py --virus influenza --config config/config.yaml ---
2025-08-30 13:35:21,436 - INFO - --- Executing: /home/topcuoglu/miniconda3/envs/orh/bin/python src/02_preprocessing/ftp/fetch_ftp_references.py --virus influenza --config config/config.yaml ---
2025-08-30 13:35:21,458 - ERROR - --- Step FAILED: /home/topcuoglu/miniconda3/envs/orh/bin/python src/02_preprocessing/ftp/fetch_ftp_references.py --virus influenza --config config/config.yaml ---
2025-08-30 13:35:21,458 - ERROR - Return Code: 2
2025-08-30 13:35:21,458 - ERROR - Stderr:
/home/topcuoglu/miniconda3/envs/orh/bin/python: can't open file '/home/topcuoglu/openrecombinhunt/src/02_preprocessing/ftp/fetch_ftp_references.py': [Errno 2] No such file or directory

2025-08-30 13:35:21,458 - ERROR - Stdout:

2025-08-30 13:35:21,458 - CRITICAL - Pipeline for 'influenza' failed at step: /home/topcuoglu/miniconda3/envs/orh/bin/python src/02_preprocessing/ftp/fetch_ftp_references.py --virus influenza --config config/config.yaml
2025-08-30 13:35:21,458 - CRITICAL - Aborting pipeline for this virus.
2025-08-30 13:35:21,458 - INFO - ================== PIPELINE FOR INFLUENZA FINISHED ==================


